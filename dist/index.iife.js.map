{"version":3,"file":"index.iife.js","sources":["../src/utility.js","../src/decorators.js","../src/components/Base/base-element.js"],"sourcesContent":["// eslint-disable-next-line\nexport function noop() { }\nexport function identity(val) { return val; }\nexport function attr2bool(val) { return val !== null; }\nexport function bool2attr(val) { return val ? '' : null; }\n\nexport const debounce = (func, wait, immediate = false) => {\n\tif (typeof func !== 'function') {\n\t\tthrow new TypeError('Expected a function');\n\t}\n\n\tlet timeout;\n\n\treturn function debounced(...args) {\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tfunc.apply(this, args);\n\t\t\t}\n\t\t};\n\n\t\tconst callNow = immediate && !timeout;\n\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (callNow) {\n\t\t\tfunc.apply(this, args);\n\t\t}\n\t};\n};\n","export function defineElement(name, options) {\n\treturn function (classDescriptor) {\n\t\tclassDescriptor.finisher = function finisher(classConstructor) {\n\t\t\tcustomElements.define(name, classConstructor, options);\n\t\t};\n\t\treturn classDescriptor;\n\t};\n}\n\nexport function property(propertyDeclaration) {\n\treturn function (propertyDescriptor) {\n\n\t\t// If the decorator is invoked on an field property it generates accessors with that name\n\t\t// and a somewhat hidden storage property.\n\t\t// The accessors are necessary to react on property changes with an render update.\n\t\tif (propertyDescriptor.kind === 'field') {\n\t\t\tconst propertyKey = `__${propertyDescriptor.key}`;\n\t\t\tpropertyDescriptor.extras = [\n\t\t\t\t{\n\t\t\t\t\tkey: propertyKey\n\t\t\t\t\t, kind: propertyDescriptor.kind\n\t\t\t\t\t, placement: propertyDescriptor.placement\n\t\t\t\t\t, initializer: propertyDescriptor.initializer\n\t\t\t\t\t, descriptor: {\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t, enumerable: true\n\t\t\t\t\t\t, writable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tpropertyDescriptor.kind = 'method';\n\t\t\tpropertyDescriptor.placement = 'prototype';\n\t\t\tdelete propertyDescriptor.initializer;\n\t\t\tpropertyDescriptor.descriptor = {\n\t\t\t\tget() { return this[propertyKey]; }\n\t\t\t\t, set(val) {\n\t\t\t\t\tif (this[propertyKey] === val) { return; }\n\t\t\t\t\tthis[propertyKey] = val;\n\t\t\t\t\tthis.requestUpdate();\n\t\t\t\t}\n\t\t\t\t, configurable: true\n\t\t\t\t, enumerable: true\n\t\t\t};\n\t\t}\n\t\tpropertyDescriptor.finisher = function finisher(classConstructor) {\n\t\t\tclassConstructor.addClassProperty(propertyDescriptor.key, propertyDeclaration);\n\t\t};\n\t\treturn propertyDescriptor;\n\t};\n}\n","import { identity } from '../../utility';\n\nexport * from './../../decorators';\nexport * from '../../utility';\n\nexport const defaultPropertyDeclaration = {\n\tobserve: true\n\t, reflect: false\n\t, prop2attr: identity\n\t, attr2prop: identity\n};\n\n//* Class *********************************************************************\nexport class BaseElement extends HTMLElement {\n\t//* Constructor *************************************************************\n\tconstructor() {\n\n\t\t/**\n     * If you define a constructor, always call super() first to apply the right property chain!\n     * This is specific to custom elements and required by the spec.\n     */\n\t\tsuper();\n\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tif (!this.shadowRoot) {\n\t\t\tthis.renderRoot = this;\n\t\t\tthrow new Error('No ShadowRoot');\n\t\t}\n\t\tthis.renderRoot = this.shadowRoot;\n\t}\n\n\n\n\t//* Properties/Getter/Setter ************************************************\n\tstatic _classProperties = new Map();\n\tstatic addClassProperty(propertyKey, propertyDeclaration) {\n\t\tthis._classProperties.set(propertyKey, Object.assign({}, defaultPropertyDeclaration, propertyDeclaration));\n\t}\n\n\trenderRoot;\n\n\t_template;\n\tget template() {\n\t\tif (!this._template) { this._template = document.createElement('template'); }\n\t\treturn this._template;\n\t}\n\n\t_styleElement;\n\tget styleElement() {\n\t\tif (!this._styleElement) { this._styleElement = document.createElement('style'); }\n\t\treturn this._styleElement;\n\t}\n\n\n\n\t//* Template ****************************************************************\n\t/* return '<div><slot name=test></slot></div>'; */\n\trenderTemplate() { return ''; }\n\n\t/* return 'div {background-color: blue;}' */\n\trenderStyle() { return ''; }\n\n\trequestUpdate() {\n\t\tconsole.log('requestUpdate: ', this);\n\t\tthis.render();\n\t}\n\n\trenderAttributes() {\n\t\tthis.constructor._classProperties.forEach((propertyDeclaration, propertyKey) => {\n\t\t\tif (!propertyDeclaration.reflect || typeof propertyKey !== 'string') { return; }\n\n\t\t\tconst { prop2attr = identity } = propertyDeclaration;\n\t\t\tconst prop = this[propertyKey];\n\t\t\tif (prop) { this.setAttribute(propertyKey, prop2attr.call(this, prop)); }\n\t\t\telse { this.removeAttribute(propertyKey); }\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.styleElement.innerHTML = this.renderStyle();\n\t\tthis.template.innerHTML = this.renderTemplate();\n\t\tthis.preCommitHook();\n\t\trequestAnimationFrame(this.commit.bind(this));\n\t}\n\n\n\n\t//* Obervers/Handlers *******************************************************\n\t/**\n   * Specify observed attributes names to be notified in attributeChangedCallback\n   */\n\tstatic get observedAttributes() {\n\t\tconst ret = [];\n\t\tthis._classProperties.forEach((propertyDeclaration, propertyKey) => {\n\t\t\tif (propertyDeclaration.observe && typeof propertyKey === 'string') { ret.push(propertyKey); }\n\t\t});\n\t\treturn ret;\n\t}\n\n\t/**\n   * Called when an observed attribute has been added, removed, updated, or replaced.\n   * Also called for initial values when an element is created by the parser, or upgraded.\n   * Note: only attributes listed in the observedAttributes property will receive this callback.\n   */\n\tattributeChangedCallback(attrName, oldValue, newValue) {\n\t\tif (oldValue === newValue) { return; }\n\t\tconst { attr2prop = identity } = this.constructor._classProperties.get(attrName) || defaultPropertyDeclaration;\n\t\tthis[attrName] = attr2prop.call(this, newValue);\n\t}\n\n\n\n\t//* Life Cycle Callbacks ****************************************************\n\t/**\n   * Invoked each time the custom element is appended into a document-connected\n   * element. This will happen each time the node is moved, and may happen before\n   * the element's contents have been fully parsed.\n   *\n   * Useful for running setup code, such as fetching resources or rendering.\n   * Generally, you should try to delay work until this time.\n   */\n\tconnectedCallback() {\n\t\tif (!this.isConnected) { return; }\n\t\tthis.render();\n\t}\n\n\t/**\n   * Invoked each time the custom element is disconnected from the document's DOM.\n   * Useful for running clean up code.\n   */\n\t// protected disconnectedCallback() {}\n\n\t/**\n   * Invoked each time the custom element is moved to a new document.\n   */\n\t// protected adoptedCallback() {}\n\n\t/**\n   * Invoked if custom elem is \"form-associative = true\".\n   */\n\t// protected formResetCallback() {}\n\n\t// eslint-disable-next-line\n\tpreCommitHook() { }\n\n\tcommit() {\n\t\tthis.renderRoot.appendChild(this.styleElement);\n\n\t\t// Does not clone the DocumentFragment, instead rips it from the template and\n\t\t// places it into the render node. This way the element will retain the references\n\t\t// of objects within the template.\n\t\tthis.renderRoot.appendChild(this.template.content);\n\t\tthis.renderAttributes();\n\t}\n}\n"],"names":["noop","identity","val","attr2bool","bool2attr","debounce","func","wait","immediate","TypeError","timeout","args","callNow","clearTimeout","setTimeout","apply","defineElement","name","options","classDescriptor","finisher","classConstructor","customElements","define","property","propertyDeclaration","propertyDescriptor","kind","propertyKey","key","extras","placement","initializer","descriptor","configurable","enumerable","writable","get","set","requestUpdate","addClassProperty","defaultPropertyDeclaration","observe","reflect","prop2attr","attr2prop","BaseElement","HTMLElement","constructor","attachShadow","mode","shadowRoot","renderRoot","Error","_classProperties","Object","assign","template","_template","document","createElement","styleElement","_styleElement","renderTemplate","console","log","render","renderAttributes","forEach","prop","setAttribute","call","removeAttribute","innerHTML","renderStyle","preCommitHook","requestAnimationFrame","commit","bind","observedAttributes","ret","push","attributeChangedCallback","attrName","oldValue","newValue","connectedCallback","isConnected","appendChild","content","Map"],"mappings":"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"}