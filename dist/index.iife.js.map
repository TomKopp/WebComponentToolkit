{"version":3,"file":"index.iife.js","sources":["../src/utility.js","../src/components/Base/base-element.js","../src/decorators.js"],"sourcesContent":["// eslint-disable-next-line\nexport function noop() { }\nexport function identity(val) { return val; }\nexport function attr2bool(val) { return val !== null; }\nexport function bool2attr(val) { return val ? '' : null; }\n\nexport const debounce = (func, wait, immediate = false) => {\n\tif (typeof func !== 'function') {\n\t\tthrow new TypeError('Expected a function');\n\t}\n\n\tlet timeout;\n\n\treturn function debounced(...args) {\n\t\tconst later = () => {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) {\n\t\t\t\tfunc.apply(this, args);\n\t\t\t}\n\t\t};\n\n\t\tconst callNow = immediate && !timeout;\n\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (callNow) {\n\t\t\tfunc.apply(this, args);\n\t\t}\n\t};\n};\n\n\n\nexport const defaultPropertyDeclaration = {\n\tobserve: true\n\t, reflect: false\n\t, prop2attr: identity\n\t, attr2prop: identity\n};\n","import { defaultPropertyDeclaration, identity } from '../../utility';\n\n\n\n//* Class *********************************************************************\nexport class BaseElement extends HTMLElement {\n\t//* Constructor *************************************************************\n\tconstructor() {\n\t\t// If you define a constructor, always call super() first to apply the right property chain!\n\t\t// This is specific to custom elements and required by the spec.\n\t\tsuper();\n\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tif (!this.shadowRoot) {\n\t\t\tthis._renderRoot = this;\n\t\t\tthrow new Error('No ShadowRoot');\n\t\t}\n\t\tthis._renderRoot = this.shadowRoot;\n\t}\n\n\n\n\t//* Properties/Getter/Setter ************************************************\n\t/**\n\t * Protected map of properties of the class with special flags.\n\t *\n\t * @protected\n\t * @static\n\t * @memberof BaseElement\n\t */\n\tstatic _classProperties = new Map();\n\tstatic addClassProperty(propertyKey, propertyDeclaration) {\n\t\tthis._classProperties.set(propertyKey, Object.assign({}, defaultPropertyDeclaration, propertyDeclaration));\n\t}\n\n\t/**\n\t * Protected property that holds a reference where to render the DOM to.\n\t *\n\t * @protected\n\t * @memberof BaseElement\n\t */\n\t_renderRoot;\n\n\t_rAFScheduled = false;\n\n\t_template;\n\tget template() {\n\t\tif (!this._template) { this._template = document.createElement('template'); }\n\t\treturn this._template;\n\t}\n\n\t_styleElement;\n\tget styleElement() {\n\t\tif (!this._styleElement) { this._styleElement = document.createElement('style'); }\n\t\treturn this._styleElement;\n\t}\n\n\n\n\t//* Template ****************************************************************\n\t/**\n\t * Override to set a template\n\t *\n\t * @example return '<div><slot name=test></slot></div>';\n\t * @returns\n\t * @memberof BaseElement\n\t */\n\trenderTemplate() { return ''; }\n\n\t/**\n\t * Override to set the style element\n\t *\n\t * @example return 'div {background-color: blue;}'\n\t * @returns\n\t * @memberof BaseElement\n\t */\n\trenderStyle() { return ''; }\n\n\t/**\n\t * Requests an update of the component. Checks if the value changed.\n\t *\n\t * @param {string} propertyKey\n\t * @param {*} oldValue\n\t * @param {*} newValue\n\t * @returns\n\t * @memberof BaseElement\n\t */\n\trequestUpdate(propertyKey, oldValue, newValue) {\n\t\tif (Object.is(oldValue, newValue)) { return; }\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Sets or removes attributes of the component, based on the 'reflect' flag of the property.\n\t *\n\t * @memberof BaseElement\n\t */\n\trenderAttributes() {\n\t\tthis.constructor._classProperties.forEach((propertyDeclaration, propertyKey) => {\n\t\t\tif (!propertyDeclaration.reflect || typeof propertyKey !== 'string') { return; }\n\n\t\t\tconst { prop2attr = identity } = propertyDeclaration;\n\t\t\tconst prop = this[propertyKey];\n\t\t\tif (prop) { this.setAttribute(propertyKey, prop2attr.call(this, prop)); }\n\t\t\telse { this.removeAttribute(propertyKey); }\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.styleElement.innerHTML = this.renderStyle();\n\t\tthis.template.innerHTML = this.renderTemplate();\n\t\tthis.preCommitHook();\n\n\t\tif (!this._rAFScheduled) {\n\t\t\tthis._rAFScheduled = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.commit();\n\t\t\t\tthis._rAFScheduled = false;\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\t//* Obervers/Handlers *******************************************************\n\t/**\n\t * Specify observed attributes names to be notified in attributeChangedCallback\n\t *\n\t * @readonly\n\t * @static\n\t * @memberof BaseElement\n\t */\n\tstatic get observedAttributes() {\n\t\tconst ret = [];\n\t\tthis._classProperties.forEach((propertyDeclaration, propertyKey) => {\n\t\t\tif (propertyDeclaration.observe && typeof propertyKey === 'string') { ret.push(propertyKey); }\n\t\t});\n\t\treturn ret;\n\t}\n\n\t/**\n\t * Called when an observed attribute has been added, removed, updated, or replaced.\n\t * Also called for initial values when an element is created by the parser, or upgraded.\n\t * Note: only attributes listed in the observedAttributes property will receive this callback.\n\t *\n\t * @param {string} attrName\n\t * @param {string | null} oldValue\n\t * @param {string | null} newValue\n\t * @returns\n\t * @memberof BaseElement\n\t */\n\tattributeChangedCallback(attrName, oldValue, newValue) {\n\t\tif (oldValue === newValue) { return; }\n\t\tconst { attr2prop = identity } = this.constructor._classProperties.get(attrName) || defaultPropertyDeclaration;\n\t\tthis[attrName] = attr2prop.call(this, newValue);\n\t}\n\n\n\n\t//* Life Cycle Callbacks ****************************************************\n\t/**\n\t * Invoked each time the custom element is appended into a document-connected\n\t * element. This will happen each time the node is moved, and may happen before\n\t * the element's contents have been fully parsed.\n\t *\n\t * Useful for running setup code, such as fetching resources or rendering.\n\t * Generally, you should try to delay work until this time.\n\t *\n\t * @returns\n\t * @memberof BaseElement\n\t */\n\tconnectedCallback() {\n\t\tif (!this.isConnected) { return; }\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Invoked each time the custom element is disconnected from the document's DOM.\n\t * Useful for running clean up code.\n\t *\n\t * @memberof BaseElement\n\t */\n\t// disconnectedCallback() {}\n\n\t/**\n\t * Invoked each time the custom element is moved to a new document.\n\t *\n\t * @memberof BaseElement\n\t */\n\t// adoptedCallback() {}\n\n\t/**\n\t * Invoked if custom elem is \"form-associative = true\".\n\t *\n\t * @memberof BaseElement\n\t */\n\t// formResetCallback() {}\n\n\t/**\n\t * Invoked each time the custom element will becommitted to the DOM.\n\t *\n\t * @memberof BaseElement\n\t */\n\t// eslint-disable-next-line\n\tpreCommitHook() { }\n\n\t/**\n\t * Invoked each time the custom element is committed to the DOM\n\t *\n\t * @memberof BaseElement\n\t */\n\tcommit() {\n\t\tthis._renderRoot.appendChild(this.styleElement);\n\n\t\t// Does not clone the DocumentFragment, instead rips it from the template and\n\t\t// places it into the render node. This way the element will retain the references\n\t\t// of objects within the template.\n\t\tthis._renderRoot.appendChild(this.template.content);\n\t\tthis.renderAttributes();\n\t}\n}\n","export function defineElement(name, options) {\n\treturn function (classDescriptor) {\n\t\tclassDescriptor.finisher = function finisher(classConstructor) {\n\t\t\tcustomElements.define(name, classConstructor, options);\n\t\t};\n\t\treturn classDescriptor;\n\t};\n}\n\nexport function property(propertyDeclaration) {\n\t// TC39 descriptor. see https://github.com/tc39/proposal-decorators/blob/master/NEXTBUILTINS.md\n\treturn function (propertyDescriptor) {\n\n\t\t// If the decorator is invoked on an field property it generates accessors with that name\n\t\t// and a somewhat hidden storage property.\n\t\t// The accessors are necessary to react on property changes with an render update.\n\t\tif (propertyDescriptor.kind === 'field') {\n\t\t\tconst propertyKey = `__${propertyDescriptor.key}`;\n\t\t\tpropertyDescriptor.extras = [\n\t\t\t\t{\n\t\t\t\t\tkey: propertyKey\n\t\t\t\t\t, kind: propertyDescriptor.kind\n\t\t\t\t\t, placement: propertyDescriptor.placement\n\t\t\t\t\t, initializer: propertyDescriptor.initializer\n\t\t\t\t\t, descriptor: {\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t\t, enumerable: true\n\t\t\t\t\t\t, writable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\n\t\t\tpropertyDescriptor.kind = 'method';\n\t\t\tpropertyDescriptor.placement = 'prototype';\n\t\t\tdelete propertyDescriptor.initializer;\n\t\t\tpropertyDescriptor.descriptor = {\n\t\t\t\tget() { return this[propertyKey]; }\n\t\t\t\t, set(val) {\n\t\t\t\t\tconst oldVal = this[propertyKey];\n\t\t\t\t\tthis[propertyKey] = val;\n\t\t\t\t\tthis.requestUpdate(propertyDescriptor.key, oldVal, val);\n\t\t\t\t}\n\t\t\t\t, configurable: true\n\t\t\t\t, enumerable: true\n\t\t\t};\n\t\t}\n\t\tpropertyDescriptor.finisher = function finisher(classConstructor) {\n\t\t\tclassConstructor.addClassProperty(propertyDescriptor.key, propertyDeclaration);\n\t\t};\n\t\treturn propertyDescriptor;\n\t};\n}\n"],"names":["noop","identity","val","attr2bool","bool2attr","debounce","func","wait","immediate","TypeError","timeout","args","callNow","clearTimeout","setTimeout","apply","defaultPropertyDeclaration","observe","reflect","prop2attr","attr2prop","BaseElement","HTMLElement","constructor","attachShadow","mode","shadowRoot","_renderRoot","Error","addClassProperty","propertyKey","propertyDeclaration","_classProperties","set","Object","assign","template","_template","document","createElement","styleElement","_styleElement","renderTemplate","renderStyle","requestUpdate","oldValue","newValue","is","render","renderAttributes","forEach","prop","setAttribute","call","removeAttribute","innerHTML","preCommitHook","_rAFScheduled","requestAnimationFrame","commit","observedAttributes","ret","push","attributeChangedCallback","attrName","get","connectedCallback","isConnected","appendChild","content","Map","defineElement","name","options","classDescriptor","finisher","classConstructor","customElements","define","property","propertyDescriptor","kind","key","extras","placement","initializer","descriptor","configurable","enumerable","writable","oldVal"],"mappings":"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"}